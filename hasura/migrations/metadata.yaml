version: 2
tables:
- table:
    schema: public
    name: arweave_endpoint
  object_relationships:
  - name: bridge_user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: bridge_user
        column_mapping:
          user_id: id
- table:
    schema: public
    name: arweave_key
  object_relationships:
  - name: bridge_user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: bridge_user
        column_mapping:
          user_id: id
- table:
    schema: public
    name: bridge_data
  object_relationships:
  - name: arweave_endpoint
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: arweave_endpoint
        column_mapping:
          arweaveEndpointId: id
          userId: user_id
  - name: skale_endpoint
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: skale_endpoint
        column_mapping:
          skaleEndpointId: id
          userId: user_id
  insert_permissions:
  - role: user
    permission:
      check:
        userId:
          _eq: X-Hasura-User-Id
      columns:
      - active
      - id
      - metaData
      - arweaveEndpointId
      - contentType
      - frequency
      - label
      - skaleEndpointId
      - status
      - userId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - userId
      - contentType
      - frequency
      - skaleEndpointId
      - arweaveEndpointId
      - active
      - status
      - metaData
      - label
      filter:
        userId:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - active
      - id
      - metaData
      - arweaveEndpointId
      - contentType
      - frequency
      - label
      - skaleEndpointId
      - status
      - userId
      filter:
        userId:
          _eq: X-Hasura-User-Id
      check: null
- table:
    schema: public
    name: bridge_user
  array_relationships:
  - name: arweave_endpoints
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: arweave_endpoint
        column_mapping:
          id: user_id
  - name: arweave_keys
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: arweave_key
        column_mapping:
          id: user_id
  - name: skale_endpoints
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: skale_end_point
        column_mapping:
          id: user_id
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      filter:
        id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: skale_end_point
- table:
    schema: public
    name: skale_endpoint
remote_schemas:
- name: gql_example_test_endpoint
  definition:
    url: https://api.graph.cool/simple/v1/cjdgba1jw4ggk0185ig4bhpsn
    timeout_seconds: 60
- name: onegraph
  definition:
    url: https://serve.onegraph.com/graphql?app_id=80d287f5-a514-46ca-a17a-caa263b8e2cb
    timeout_seconds: 60
    forward_client_headers: true
